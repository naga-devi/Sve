(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"jK+u":function(c,t,e){"use strict";e.r(t),e.d(t,"routes",(function(){return vc})),e.d(t,"PurchasesModule",(function(){return gc}));var r=e("ofXK"),o=e("tyNb"),a=e("PCNd"),i=e("oOf3"),n=e("3Pt+"),s=e("F5nt"),l=e("mIbC"),u=e("/RaO"),d=e("AytR"),m=e("0IaG"),b=e("fXoL"),p=e("Wp6s"),f=e("XiUz"),h=e("bTqV"),v=e("f0Cb");function g(c,t){if(1&c&&(b.cc(0,"div",6),b.cc(1,"div",7),b.Oc(2),b.bc(),b.cc(3,"div",7),b.Oc(4),b.bc(),b.cc(5,"div",7),b.Oc(6),b.bc(),b.cc(7,"div",7),b.Oc(8),b.bc(),b.cc(9,"div",7),b.Oc(10),b.bc(),b.cc(11,"div",7),b.Oc(12),b.bc(),b.cc(13,"div",7),b.Oc(14),b.bc(),b.cc(15,"div",7),b.Oc(16),b.bc(),b.cc(17,"div",7),b.Oc(18),b.bc(),b.cc(19,"div",7),b.Oc(20),b.bc(),b.cc(21,"div",7),b.Oc(22),b.bc(),b.cc(23,"div",7),b.Oc(24),b.bc(),b.cc(25,"div",7),b.Oc(26),b.pc(27,"number"),b.bc(),b.bc()),2&c){const c=t.$implicit;b.Jb(2),b.Pc(c.productName),b.Jb(2),b.Pc(c.categoryName),b.Jb(2),b.Pc(c.materialTypeName),b.Jb(2),b.Pc(c.sizeName),b.Jb(2),b.Pc(c.brandName),b.Jb(2),b.Pc(c.gradeName),b.Jb(2),b.Pc(c.colorName),b.Jb(2),b.Pc(null==c||null==c.purchase?null:c.purchase.mrp),b.Jb(2),b.Pc(null==c||null==c.purchase?null:c.purchase.unitPrice),b.Jb(2),b.Pc(null==c||null==c.purchase?null:c.purchase.cgstAmount),b.Jb(2),b.Pc(null==c||null==c.purchase?null:c.purchase.sgstAmount),b.Jb(2),b.Pc(null==c||null==c.purchase?null:c.purchase.quanitity),b.Jb(2),b.Pc(b.rc(27,13,null==c||null==c.purchase?null:c.purchase.subTotal,"1.2-2"))}}let O=(()=>{class c{constructor(c,t,e,r){this.dialogRef=c,this.data=t,this.appService=e,this.alertService=r,this.purchaseItems=[]}ngOnInit(){this.getPurchaseItemsByOrderId()}getPurchaseItemsByOrderId(){this.appService.getBy(`purchasing/${this.data.order.purchaseOrderId}/details/view`).subscribe(c=>{this.purchaseItems=c},c=>{this.alertService.error(c)})}ngOnDestroy(){}}return c.\u0275fac=function(t){return new(t||c)(b.Wb(m.h),b.Wb(m.a),b.Wb(s.a),b.Wb(l.NotificationService))},c.\u0275cmp=b.Qb({type:c,selectors:[["app-purchases-details-list-dialog"]],decls:73,vars:8,consts:[[1,"p-1"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-2"],["mat-raised-button","","color","warn","type","button","mat-dialog-close",""],[1,"mat-table","admin-table"],[1,"mat-header-row"],[1,"mat-header-cell"],[1,"mat-row"],[1,"mat-cell"],[1,"order"],["class","mat-row",4,"ngFor","ngForOf"]],template:function(c,t){1&c&&(b.cc(0,"div",0),b.cc(1,"mat-dialog-content"),b.cc(2,"mat-card"),b.cc(3,"div",1),b.cc(4,"h2"),b.Oc(5),b.bc(),b.cc(6,"button",2),b.Oc(7,"Close"),b.bc(),b.bc(),b.Xb(8,"mat-divider"),b.cc(9,"mat-card-content"),b.cc(10,"div",3),b.cc(11,"div",4),b.cc(12,"div",5),b.Oc(13,"Invoice#"),b.bc(),b.cc(14,"div",5),b.Oc(15,"Company Name"),b.bc(),b.cc(16,"div",5),b.Oc(17,"Contact No."),b.bc(),b.cc(18,"div",5),b.Oc(19,"Purchase Date"),b.bc(),b.cc(20,"div",5),b.Oc(21,"Total"),b.bc(),b.bc(),b.cc(22,"div",6),b.cc(23,"div",7),b.cc(24,"span",8),b.Oc(25),b.bc(),b.bc(),b.cc(26,"div",7),b.Oc(27),b.bc(),b.cc(28,"div",7),b.Oc(29),b.bc(),b.cc(30,"div",7),b.Oc(31),b.bc(),b.cc(32,"div",7),b.cc(33,"strong"),b.Oc(34),b.bc(),b.Oc(35," for "),b.cc(36,"strong"),b.Oc(37),b.bc(),b.Oc(38," items"),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(39,"div",1),b.cc(40,"h2"),b.Oc(41,"Purchased Items"),b.bc(),b.bc(),b.Xb(42,"mat-divider"),b.cc(43,"mat-card-content"),b.cc(44,"div",3),b.cc(45,"div",4),b.cc(46,"div",5),b.Oc(47,"Product"),b.bc(),b.cc(48,"div",5),b.Oc(49,"Category"),b.bc(),b.cc(50,"div",5),b.Oc(51,"Material"),b.bc(),b.cc(52,"div",5),b.Oc(53,"Size"),b.bc(),b.cc(54,"div",5),b.Oc(55,"Brand"),b.bc(),b.cc(56,"div",5),b.Oc(57,"Grade"),b.bc(),b.cc(58,"div",5),b.Oc(59,"Color"),b.bc(),b.cc(60,"div",5),b.Oc(61,"MRP"),b.bc(),b.cc(62,"div",5),b.Oc(63,"UnitPrice"),b.bc(),b.cc(64,"div",5),b.Oc(65,"Cgst"),b.bc(),b.cc(66,"div",5),b.Oc(67,"Sgst"),b.bc(),b.cc(68,"div",5),b.Oc(69,"Quantity"),b.bc(),b.cc(70,"div",5),b.Oc(71,"Total"),b.bc(),b.bc(),b.Mc(72,g,28,16,"div",9),b.bc(),b.bc(),b.bc(),b.bc(),b.bc()),2&c&&(b.Jb(5),b.Qc("",t.data.order.companyName," Purchase Order"),b.Jb(20),b.Qc("#",t.data.order.invoiceNo,""),b.Jb(2),b.Pc(null==t.data.order?null:t.data.order.companyName),b.Jb(2),b.Pc(null==t.data.order?null:t.data.order.phoneNo),b.Jb(2),b.Pc(t.data.order.purchaseDate),b.Jb(3),b.Qc("\u20b9",t.data.order.grandTotal,""),b.Jb(3),b.Pc(t.data.order.quantity),b.Jb(35),b.vc("ngForOf",t.purchaseItems))},directives:[m.f,p.a,f.d,f.c,h.b,m.e,v.a,p.b,r.l],pipes:[r.f],styles:[""]}),c})();var I=e("kmnG"),y=e("qFsG"),N=e("Dh3D"),q=e("Qu3c"),S=e("STbY"),P=e("NFeN");function x(c,t){if(1&c){const c=b.dc();b.cc(0,"div",16),b.cc(1,"div",17),b.cc(2,"span",18),b.Oc(3),b.bc(),b.bc(),b.cc(4,"div",17),b.Oc(5),b.bc(),b.cc(6,"div",17),b.Oc(7),b.bc(),b.cc(8,"div",17),b.Oc(9),b.bc(),b.cc(10,"div",17),b.cc(11,"strong"),b.Oc(12),b.bc(),b.Oc(13," for "),b.cc(14,"strong"),b.Oc(15),b.bc(),b.Oc(16," items"),b.bc(),b.cc(17,"div",17),b.cc(18,"div",19),b.cc(19,"button",20),b.cc(20,"mat-icon"),b.Oc(21,"more_vert"),b.bc(),b.bc(),b.cc(22,"mat-menu",null,21),b.cc(24,"button",22),b.kc("click",(function(){b.Fc(c);const e=t.$implicit;return b.oc().openOrderDetailsDialog(e)})),b.cc(25,"mat-icon"),b.Oc(26,"content_copy"),b.bc(),b.cc(27,"span"),b.Oc(28,"View"),b.bc(),b.bc(),b.cc(29,"button",22),b.kc("click",(function(){b.Fc(c);const e=t.$implicit;return b.oc().edit(e)})),b.cc(30,"mat-icon"),b.Oc(31,"edit"),b.bc(),b.cc(32,"span"),b.Oc(33,"Edit"),b.bc(),b.bc(),b.cc(34,"button",22),b.kc("click",(function(){b.Fc(c);const e=t.$implicit;return b.oc().deleteOrder(e)})),b.cc(35,"mat-icon"),b.Oc(36,"delete"),b.bc(),b.cc(37,"span"),b.Oc(38,"Delete"),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc()}if(2&c){const c=t.$implicit,e=b.Cc(23);b.Jb(3),b.Qc("#",c.invoiceNo,""),b.Jb(2),b.Pc(null==c?null:c.companyName),b.Jb(2),b.Pc(null==c?null:c.phoneNo),b.Jb(2),b.Pc(c.purchaseDate),b.Jb(3),b.Qc("\u20b9",c.grandTotal,""),b.Jb(3),b.Pc(c.quantity),b.Jb(4),b.vc("matMenuTriggerFor",e)}}function J(c,t){1&c&&(b.cc(0,"div",23),b.Oc(1,"No records found"),b.bc())}function A(c,t){if(1&c){const c=b.dc();b.cc(0,"div",24),b.cc(1,"div",25),b.cc(2,"mat-card",26),b.cc(3,"pagination-controls",27),b.kc("pageChange",(function(t){return b.Fc(c),b.oc().onPageChanged(t)})),b.bc(),b.bc(),b.bc(),b.bc()}}const C=function(){return["/admin/purchases/add-purchase"]},T=function(c,t,e){return{itemsPerPage:c,currentPage:t,totalItems:e}};let w=(()=>{class c{constructor(c,t,e,r,o,a){this.appService=c,this.dialog=t,this.router=e,this.alertService=r,this.uploadDownloadService=o,this.appSettings=a,this.matTable={data:[],page:1,count:10,totalItems:0,sort:{direction:"desc",active:"purchaseDate"},filter:{InvoiceNo:""}},this.settings=this.appSettings.settings}ngOnInit(){this.getOrdersList()}getOrdersList(){const c=new l.QueryParamsModel(this.matTable.filter,this.matTable.sort.active,this.matTable.sort.direction,this.matTable.page||1,10);this.appService.postBy("purchasing/purchase-order/find",c).subscribe(c=>{this.matTable.data=c.items?c.items:[],this.matTable.totalItems=c.totalCount})}onPageChanged(c){this.matTable.page=c,window.scrollTo(0,0)}searchByOrderNo(c){0!=parseInt(c.target.value,0)&&(this.matTable.filter.InvoiceNo=c.target.value,this.getOrdersList())}openOrderDetailsDialog(c){this.dialog.open(O,{data:{order:c},panelClass:["theme-dialog"],autoFocus:!1,direction:this.settings.rtl?"rtl":"ltr",width:"80%"}).afterClosed().subscribe(c=>{})}edit(c){this.router.navigateByUrl("admin/purchases/edit/"+c.purchaseOrderId)}deleteOrder(c){this.appService.deleteBy("purchasing/purchase-order/delete/"+c.purchaseOrderId).subscribe(c=>{c.code===l.ResponseStatus.Success?(this.alertService.success(c.message),this.getOrdersList()):this.alertService.error(c.message)},c=>{this.alertService.error(c)})}downloadInvoice(c){this.uploadDownloadService.downloadFileFromApi(`${d.a.apiUrl}sales/orders/download-invoice/${c}`,c+"-invoice.pdf")}}return c.\u0275fac=function(t){return new(t||c)(b.Wb(s.a),b.Wb(m.c),b.Wb(o.e),b.Wb(l.NotificationService),b.Wb(l.UploadDownloadService),b.Wb(u.a))},c.\u0275cmp=b.Qb({type:c,selectors:[["app-orders"]],decls:30,vars:12,consts:[[1,"p-1"],[1,"p-0"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-2"],["fxFlex","100%"],["name","searchform","autocomplete","off",1,"user-search"],["floatLabel","auto","hideRequiredMarker","","appearance","outline",1,"user-search-input"],["matInput","","type","number","placeholder","Search by order#...","name","search",3,"keydown.enter"],["mat-raised-button","","color","primary",3,"routerLink"],["matSort","",1,"mat-table","admin-table"],[1,"mat-header-row"],[1,"mat-header-cell"],["mat-sort-header","companyName",1,"mat-header-cell"],["mat-sort-header","purchaseDate",1,"mat-header-cell"],["class","mat-row",4,"ngFor","ngForOf"],["class","table-empty-row",4,"ngIf"],["fxLayout","row wrap",4,"ngIf"],[1,"mat-row"],[1,"mat-cell"],[1,"order"],[1,"p-1","actions"],["mat-icon-button","","matTooltip","More actions",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","","type","button",3,"click"],[1,"table-empty-row"],["fxLayout","row wrap"],["fxFlex","100"],[1,"p-0","text-center"],["autoHide","true","maxSize","10",1,"product-pagination",3,"pageChange"]],template:function(c,t){1&c&&(b.cc(0,"div",0),b.cc(1,"mat-card",1),b.cc(2,"div",2),b.cc(3,"div",3),b.cc(4,"div",4),b.cc(5,"mat-form-field",5),b.cc(6,"input",6),b.kc("keydown.enter",(function(c){return t.searchByOrderNo(c)})),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.Xb(7,"mat-divider"),b.cc(8,"div",2),b.cc(9,"h2"),b.Oc(10,"Orders List"),b.bc(),b.cc(11,"a",7),b.Oc(12," Add Orders "),b.bc(),b.bc(),b.cc(13,"div",8),b.cc(14,"div",9),b.cc(15,"div",10),b.Oc(16,"Invoice#"),b.bc(),b.cc(17,"div",11),b.Oc(18,"Company Name"),b.bc(),b.cc(19,"div",10),b.Oc(20,"Contact No."),b.bc(),b.cc(21,"div",12),b.Oc(22,"Purchase Date"),b.bc(),b.cc(23,"div",10),b.Oc(24,"Total"),b.bc(),b.Xb(25,"div",10),b.bc(),b.Mc(26,x,39,7,"div",13),b.pc(27,"paginate"),b.bc(),b.Mc(28,J,2,0,"div",14),b.bc(),b.Mc(29,A,4,0,"div",15),b.bc()),2&c&&(b.Jb(11),b.vc("routerLink",b.xc(7,C)),b.Jb(15),b.vc("ngForOf",b.rc(27,4,t.matTable.data,b.Ac(8,T,t.matTable.count,t.matTable.page,t.matTable.totalItems))),b.Jb(2),b.vc("ngIf",t.matTable.data&&0===t.matTable.data.length),b.Jb(1),b.vc("ngIf",t.matTable.data.length>0))},directives:[p.a,f.d,f.c,f.a,I.c,y.b,v.a,h.a,o.g,N.a,N.b,r.l,r.m,h.b,q.a,S.e,P.a,S.f,S.c,i.c],pipes:[i.b],styles:["mat-form-field.mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),c})();var F=e("nXKg"),M=e("d3UM"),k=e("FKr1"),B=e("vBMV");function D(c,t){if(1&c&&(b.cc(0,"mat-option",13),b.cc(1,"span"),b.Oc(2),b.bc(),b.bc()),2&c){const c=t.$implicit;b.vc("value",c.productId),b.Jb(2),b.Pc(c.name)}}function L(c,t){1&c&&(b.cc(0,"mat-error"),b.Oc(1,"Product is required"),b.bc())}function X(c,t){if(1&c&&(b.cc(0,"mat-option",13),b.cc(1,"span"),b.Oc(2),b.bc(),b.bc()),2&c){const c=t.$implicit;b.vc("value",c.brandId),b.Jb(2),b.Pc(c.name)}}function W(c,t){1&c&&(b.cc(0,"mat-error"),b.Oc(1,"Brand is required"),b.bc())}function U(c,t){if(1&c&&(b.cc(0,"mat-option",13),b.cc(1,"span"),b.Oc(2),b.bc(),b.bc()),2&c){const c=t.$implicit;b.vc("value",c.materialTypeId),b.Jb(2),b.Pc(c.name)}}function V(c,t){if(1&c&&(b.cc(0,"mat-option",13),b.cc(1,"span"),b.Oc(2),b.bc(),b.bc()),2&c){const c=t.$implicit;b.vc("value",c.sizeId),b.Jb(2),b.Pc(c.name)}}function G(c,t){1&c&&(b.cc(0,"mat-error"),b.Oc(1,"Size is required"),b.bc())}function R(c,t){if(1&c&&(b.cc(0,"mat-option",13),b.cc(1,"span"),b.Oc(2),b.bc(),b.bc()),2&c){const c=t.$implicit;b.vc("value",c.gradeId),b.Jb(2),b.Pc(c.name)}}function $(c,t){if(1&c&&(b.cc(0,"mat-option",13),b.cc(1,"span"),b.Oc(2),b.bc(),b.bc()),2&c){const c=t.$implicit;b.vc("value",c.colorId),b.Jb(2),b.Pc(c.name)}}function z(c,t){if(1&c&&(b.cc(0,"mat-option",13),b.cc(1,"span"),b.Oc(2),b.bc(),b.bc()),2&c){const c=t.$implicit;b.vc("value",c.unitMeasureId),b.Jb(2),b.Pc(c.name)}}function Q(c,t){1&c&&(b.cc(0,"mat-error"),b.Oc(1,"UnitMeasure is required"),b.bc())}function _(c,t){1&c&&(b.cc(0,"mat-error"),b.Oc(1,"MRP is required"),b.bc())}function K(c,t){1&c&&(b.cc(0,"mat-error"),b.Oc(1,"Quantity is required"),b.bc())}function E(c,t){1&c&&(b.cc(0,"mat-error"),b.Oc(1,"Unit price is required"),b.bc())}function j(c,t){1&c&&(b.cc(0,"mat-error"),b.Oc(1,"CGST is required"),b.bc())}function H(c,t){1&c&&(b.cc(0,"mat-error"),b.Oc(1,"SGST is required"),b.bc())}let Y=(()=>{class c{constructor(c,t,e,r){this.dialogRef=c,this.data=t,this.appService=e,this.fb=r,this.materialTypes=[],this.sizes=[],this.brands=[],this.products=[],this.grades=[],this.colors=[]}ngOnInit(){this.products=this.data.products,this.form=this.fb.group({id:0,categoryId:[null,n.v.required],productId:[null,n.v.required],materialTypeId:[null,n.v.required],sizeId:[null,n.v.required],brandId:[null,n.v.required],colorId:[1],gradeId:[1],unitMeasureId:[null,n.v.required],unitPrice:[null,n.v.required],quanitity:[null,n.v.required],mrp:[null,n.v.required],totalCgstAmount:[null,n.v.required],totalSgstAmount:[null,n.v.required],taxableAmount:[null],cgstAmount:[null],sgstAmount:[null],totalAmount:[null],discount:[null],subtotal:[null]}),this.data.purchase&&this.form.patchValue(this.data.purchase)}onProductFilter(c){let t=c.toLowerCase();this.products=this.data.products.filter(c=>c.categoryId==this.form.controls.categoryId.value&&parseInt(this.form.controls.categoryId.value,0)&&c.name.toLowerCase().startsWith(t))}updatePrice(){const c=Number(this.form.controls.unitPrice.value),t=Number(this.form.controls.quanitity.value),e=Number(this.form.controls.discount.value);let r=0;const o=parseInt(this.form.controls.productId.value,0),a=this.products.filter(c=>c.productId==o)[0].taxSlabId,i=this.data.prerequisites.taxItems.filter(c=>c.taxSlabId===a)[0].cgst,n=this.data.prerequisites.taxItems.filter(c=>c.taxSlabId===a)[0].sgst;if(c>0&&i>0&&n>0){r=e>0?c-c*e/100:c;const o=i/100*r,a=n/100*r,s=r+o+a;this.form.controls.subtotal.setValue(r),this.form.controls.cgstAmount.setValue(o),this.form.controls.sgstAmount.setValue(a),this.form.controls.totalAmount.setValue(s),this.form.controls.totalCgstAmount.setValue(l.Utilities.toFixed(o*t,2)),this.form.controls.totalSgstAmount.setValue(l.Utilities.toFixed(a*t,2)),this.form.controls.taxableAmount.setValue(l.Utilities.toFixed(r*t,2))}}onSubmit(){this.form.valid&&this.dialogRef.close(this.form.value)}}return c.\u0275fac=function(t){return new(t||c)(b.Wb(m.h),b.Wb(m.a),b.Wb(s.a),b.Wb(n.d))},c.\u0275cmp=b.Qb({type:c,selectors:[["app-purchases-orders-add-purchase-item"]],decls:123,vars:47,consts:[["mat-dialog-title",""],["autocomplete","off",3,"formGroup","ngSubmit"],["mat-dialog-content",""],["fxLayout","row wrap",1,"mt-2"],["fxFlex","100","fxFlex.gt-sm","50",1,"px-1"],[3,"label","valueField","textField","dataSource","control","loadOnInit"],["appearance","outline",1,"w-100"],["formControlName","productId","required",""],["placeholder","Search by name",1,"search-control",3,"keyup"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["fxFlex","100","fxFlex.gt-sm","20",1,"px-1"],["formControlName","brandId"],[3,"value"],["formControlName","materialTypeId"],["formControlName","sizeId"],["formControlName","gradeId"],["formControlName","colorId"],["formControlName","unitMeasureId"],["matInput","","formControlName","mrp","type","number"],["matInput","","formControlName","quanitity","type","number"],["matInput","","formControlName","unitPrice","type","number",3,"keyup"],["matInput","","formControlName","discount","type","number",3,"keyup"],["matInput","","formControlName","subtotal","type","number","readonly",""],["matInput","","formControlName","totalCgstAmount","type","number"],["matInput","","formControlName","totalSgstAmount","type","number"],["matInput","","formControlName","taxableAmount","type","number","readonly",""],["mat-dialog-actions",""],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["mat-raised-button","","color","warn","type","button","mat-dialog-close",""],["mat-raised-button","","color","primary","type","submit"]],template:function(c,t){1&c&&(b.cc(0,"h1",0),b.Oc(1,"Add stock"),b.bc(),b.cc(2,"form",1),b.kc("ngSubmit",(function(){return t.onSubmit()})),b.cc(3,"div",2),b.cc(4,"div",3),b.cc(5,"div",4),b.Xb(6,"kt-jx-mat-select",5),b.bc(),b.cc(7,"div",4),b.cc(8,"mat-form-field",6),b.cc(9,"mat-label"),b.Oc(10,"Product"),b.bc(),b.cc(11,"mat-select",7),b.cc(12,"input",8),b.kc("keyup",(function(c){return t.onProductFilter(c.target.value)})),b.bc(),b.Mc(13,D,3,2,"mat-option",9),b.pc(14,"filterByKey"),b.bc(),b.Mc(15,L,2,0,"mat-error",10),b.bc(),b.bc(),b.cc(16,"div",11),b.cc(17,"mat-form-field",6),b.cc(18,"mat-label"),b.Oc(19,"Brands"),b.bc(),b.cc(20,"mat-select",12),b.cc(21,"mat-option",13),b.Oc(22,"-"),b.bc(),b.Mc(23,X,3,2,"mat-option",9),b.pc(24,"filterByKey"),b.bc(),b.Mc(25,W,2,0,"mat-error",10),b.bc(),b.bc(),b.cc(26,"div",11),b.cc(27,"mat-form-field",6),b.cc(28,"mat-label"),b.Oc(29,"Material Type"),b.bc(),b.cc(30,"mat-select",14),b.cc(31,"mat-option",13),b.Oc(32,"-"),b.bc(),b.Mc(33,U,3,2,"mat-option",9),b.pc(34,"filterByKey"),b.bc(),b.bc(),b.bc(),b.cc(35,"div",11),b.cc(36,"mat-form-field",6),b.cc(37,"mat-label"),b.Oc(38,"Sizes"),b.bc(),b.cc(39,"mat-select",15),b.cc(40,"mat-option",13),b.Oc(41,"-"),b.bc(),b.Mc(42,V,3,2,"mat-option",9),b.pc(43,"filterByKey"),b.bc(),b.Mc(44,G,2,0,"mat-error",10),b.bc(),b.bc(),b.cc(45,"div",11),b.cc(46,"mat-form-field",6),b.cc(47,"mat-label"),b.Oc(48,"Grades"),b.bc(),b.cc(49,"mat-select",16),b.cc(50,"mat-option",13),b.Oc(51,"-"),b.bc(),b.Mc(52,R,3,2,"mat-option",9),b.pc(53,"filterByKey"),b.bc(),b.bc(),b.bc(),b.cc(54,"div",11),b.cc(55,"mat-form-field",6),b.cc(56,"mat-label"),b.Oc(57,"Colors"),b.bc(),b.cc(58,"mat-select",17),b.cc(59,"mat-option",13),b.Oc(60,"-"),b.bc(),b.Mc(61,$,3,2,"mat-option",9),b.pc(62,"filterByKey"),b.bc(),b.bc(),b.bc(),b.cc(63,"div",11),b.cc(64,"mat-form-field",6),b.cc(65,"mat-label"),b.Oc(66,"UnitMeasure"),b.bc(),b.cc(67,"mat-select",18),b.cc(68,"mat-option",13),b.Oc(69,"-"),b.bc(),b.Mc(70,z,3,2,"mat-option",9),b.bc(),b.Mc(71,Q,2,0,"mat-error",10),b.bc(),b.bc(),b.cc(72,"div",11),b.cc(73,"mat-form-field",6),b.cc(74,"mat-label"),b.Oc(75,"MRP"),b.bc(),b.Xb(76,"input",19),b.Mc(77,_,2,0,"mat-error",10),b.bc(),b.bc(),b.cc(78,"div",11),b.cc(79,"mat-form-field",6),b.cc(80,"mat-label"),b.Oc(81,"Quantity"),b.bc(),b.Xb(82,"input",20),b.Mc(83,K,2,0,"mat-error",10),b.bc(),b.bc(),b.cc(84,"div",11),b.cc(85,"mat-form-field",6),b.cc(86,"mat-label"),b.Oc(87,"Unit Price"),b.bc(),b.cc(88,"input",21),b.kc("keyup",(function(){return t.updatePrice()})),b.bc(),b.Mc(89,E,2,0,"mat-error",10),b.bc(),b.bc(),b.cc(90,"div",11),b.cc(91,"mat-form-field",6),b.cc(92,"mat-label"),b.Oc(93,"Discount(%)"),b.bc(),b.cc(94,"input",22),b.kc("keyup",(function(){return t.updatePrice()})),b.bc(),b.bc(),b.bc(),b.cc(95,"div",11),b.cc(96,"mat-form-field",6),b.cc(97,"mat-label"),b.Oc(98,"Sub Total"),b.bc(),b.Xb(99,"input",23),b.bc(),b.bc(),b.cc(100,"div",11),b.cc(101,"mat-form-field",6),b.cc(102,"mat-label"),b.Oc(103,"Total CGST"),b.bc(),b.Xb(104,"input",24),b.Mc(105,j,2,0,"mat-error",10),b.bc(),b.bc(),b.cc(106,"div",11),b.cc(107,"mat-form-field",6),b.cc(108,"mat-label"),b.Oc(109,"Total SGST"),b.bc(),b.Xb(110,"input",25),b.Mc(111,H,2,0,"mat-error",10),b.bc(),b.bc(),b.cc(112,"div",11),b.cc(113,"mat-form-field",6),b.cc(114,"mat-label"),b.Oc(115,"Taxable Amount"),b.bc(),b.Xb(116,"input",26),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(117,"div",27),b.cc(118,"div",28),b.cc(119,"button",29),b.Oc(120,"Close"),b.bc(),b.cc(121,"button",30),b.Oc(122,"Save"),b.bc(),b.bc(),b.bc(),b.bc()),2&c&&(b.Jb(2),b.vc("formGroup",t.form),b.Jb(4),b.vc("label","Category")("valueField","id")("textField","name")("dataSource",t.data.prerequisites.categories)("control",t.form.get("categoryId"))("loadOnInit",!1),b.Jb(7),b.vc("ngForOf",b.sc(14,23,t.products,"categoryId",t.form.get("categoryId").value)),b.Jb(2),b.vc("ngIf",null==t.form.controls.productId.errors?null:t.form.controls.productId.errors.required),b.Jb(8),b.vc("ngForOf",b.sc(24,27,t.data.prerequisites.brands,"categoryId",t.form.get("categoryId").value)),b.Jb(2),b.vc("ngIf",null==t.form.controls.brandId.errors?null:t.form.controls.brandId.errors.required),b.Jb(8),b.vc("ngForOf",b.sc(34,31,t.data.prerequisites.materialTypes,"categoryId",t.form.get("categoryId").value)),b.Jb(9),b.vc("ngForOf",b.sc(43,35,t.data.prerequisites.sizes,"categoryId",t.form.get("categoryId").value)),b.Jb(2),b.vc("ngIf",null==t.form.controls.sizeId.errors?null:t.form.controls.sizeId.errors.required),b.Jb(8),b.vc("ngForOf",b.sc(53,39,t.data.prerequisites.grades,"categoryId",t.form.get("categoryId").value)),b.Jb(9),b.vc("ngForOf",b.sc(62,43,t.data.prerequisites.colors,"categoryId",t.form.get("categoryId").value)),b.Jb(9),b.vc("ngForOf",t.data.unitmeasures),b.Jb(1),b.vc("ngIf",null==t.form.controls.unitMeasureId.errors?null:t.form.controls.unitMeasureId.errors.required),b.Jb(6),b.vc("ngIf",null==t.form.controls.mrp.errors?null:t.form.controls.mrp.errors.required),b.Jb(6),b.vc("ngIf",null==t.form.controls.quanitity.errors?null:t.form.controls.quanitity.errors.required),b.Jb(6),b.vc("ngIf",null==t.form.controls.unitPrice.errors?null:t.form.controls.unitPrice.errors.required),b.Jb(16),b.vc("ngIf",null==t.form.controls.totalCgstAmount.errors?null:t.form.controls.totalCgstAmount.errors.required),b.Jb(6),b.vc("ngIf",null==t.form.controls.totalSgstAmount.errors?null:t.form.controls.totalSgstAmount.errors.required))},directives:[m.i,n.w,n.p,n.i,m.f,f.d,f.a,F.a,I.c,I.g,M.a,n.o,n.g,n.u,r.l,r.m,k.n,y.b,n.c,n.s,m.d,f.c,h.b,m.e,I.b],pipes:[B.b],styles:[".search-control[_ngcontent-%COMP%]{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:15px;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}"]}),c})();var Z=e("ZokB"),cc=e("iadO");function tc(c,t){1&c&&(b.cc(0,"mat-error"),b.Oc(1," TinNo is required "),b.bc())}function ec(c,t){1&c&&(b.cc(0,"mat-error"),b.Oc(1," Company Name is required "),b.bc())}function rc(c,t){1&c&&(b.cc(0,"mat-error"),b.Oc(1," Company Name isn't long enough, minimum of 4 characters "),b.bc())}function oc(c,t){1&c&&(b.cc(0,"mat-error"),b.Oc(1," Contact No is required "),b.bc())}function ac(c,t){1&c&&(b.cc(0,"mat-error"),b.Oc(1," Email is required "),b.bc())}function ic(c,t){1&c&&(b.cc(0,"mat-error"),b.Oc(1," Address No is required "),b.bc())}function nc(c,t){1&c&&(b.cc(0,"mat-error"),b.Oc(1," Invoice No is required "),b.bc())}function sc(c,t){1&c&&(b.cc(0,"mat-error"),b.Oc(1," Purchase date is required "),b.bc())}function lc(c,t){1&c&&(b.cc(0,"mat-error"),b.Oc(1," Total is required "),b.bc())}function uc(c,t){1&c&&(b.cc(0,"mat-error"),b.Oc(1," NetAmount is required "),b.bc())}function dc(c,t){1&c&&(b.cc(0,"mat-error"),b.Oc(1," Grand Total is required "),b.bc())}function mc(c,t){if(1&c){const c=b.dc();b.cc(0,"div",35),b.cc(1,"div",36),b.Oc(2),b.pc(3,"filterById"),b.bc(),b.cc(4,"div",36),b.Oc(5),b.pc(6,"filterById"),b.bc(),b.cc(7,"div",36),b.Oc(8),b.pc(9,"filterById"),b.bc(),b.cc(10,"div",36),b.Oc(11),b.pc(12,"filterById"),b.bc(),b.cc(13,"div",36),b.Oc(14),b.pc(15,"filterById"),b.bc(),b.cc(16,"div",36),b.Oc(17),b.pc(18,"filterById"),b.bc(),b.cc(19,"div",36),b.Oc(20),b.pc(21,"filterById"),b.bc(),b.cc(22,"div",36),b.Oc(23),b.pc(24,"filterById"),b.bc(),b.cc(25,"div",36),b.Oc(26),b.bc(),b.cc(27,"div",36),b.Oc(28),b.bc(),b.cc(29,"div",36),b.Oc(30),b.bc(),b.cc(31,"div",36),b.Oc(32),b.bc(),b.cc(33,"div",36),b.Oc(34),b.bc(),b.cc(35,"div",36),b.Oc(36),b.bc(),b.cc(37,"div",36),b.cc(38,"div",37),b.cc(39,"button",38),b.cc(40,"mat-icon"),b.Oc(41,"more_vert"),b.bc(),b.bc(),b.cc(42,"mat-menu",null,39),b.cc(44,"button",40),b.kc("click",(function(){b.Fc(c);const e=t.$implicit,r=t.index;return b.oc().openAddItemDialog(e,r,!1)})),b.cc(45,"mat-icon"),b.Oc(46,"edit"),b.bc(),b.cc(47,"span"),b.Oc(48,"Edit"),b.bc(),b.bc(),b.cc(49,"button",40),b.kc("click",(function(){b.Fc(c);const e=t.$implicit,r=t.index;return b.oc().remove(e,r)})),b.cc(50,"mat-icon"),b.Oc(51,"delete"),b.bc(),b.cc(52,"span"),b.Oc(53,"Delete"),b.bc(),b.bc(),b.cc(54,"button",40),b.kc("click",(function(){b.Fc(c);const e=t.$implicit,r=t.index;return b.oc().copyPurchaseItem(e,r)})),b.cc(55,"mat-icon"),b.Oc(56,"content_copy"),b.bc(),b.cc(57,"span"),b.Oc(58,"Copy"),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc()}if(2&c){const c=t.$implicit,u=b.Cc(43),d=b.oc();var e,r,o,a,i,n,s,l;b.Jb(2),b.Pc(null==(e=b.sc(3,15,d.products,c.productId,"productId"))?null:e.name),b.Jb(3),b.Pc(null==(r=b.rc(6,19,null==d.prerequisites?null:d.prerequisites.categories,c.categoryId))?null:r.name),b.Jb(3),b.Pc(null==(o=b.sc(9,22,null==d.prerequisites?null:d.prerequisites.materialTypes,c.materialTypeId,"materialTypeId"))?null:o.name),b.Jb(3),b.Pc(null==(a=b.sc(12,26,null==d.prerequisites?null:d.prerequisites.sizes,c.sizeId,"sizeId"))?null:a.name),b.Jb(3),b.Pc(null==(i=b.sc(15,30,null==d.prerequisites?null:d.prerequisites.brands,c.brandId,"brandId"))?null:i.name),b.Jb(3),b.Pc(null==(n=b.sc(18,34,null==d.prerequisites?null:d.prerequisites.grades,c.gradeId,"gradeId"))?null:n.name),b.Jb(3),b.Pc(null==(s=b.sc(21,38,null==d.prerequisites?null:d.prerequisites.colors,c.colorId,"colorId"))?null:s.name),b.Jb(3),b.Pc(null==(l=b.sc(24,42,d.unitmeasures,c.unitMeasureId,"unitMeasureId"))?null:l.name),b.Jb(3),b.Pc(c.quanitity),b.Jb(2),b.Pc(c.mrp),b.Jb(2),b.Pc(c.unitPrice),b.Jb(2),b.Pc(c.totalCgstAmount),b.Jb(2),b.Pc(c.totalSgstAmount),b.Jb(2),b.Pc(c.taxableAmount),b.Jb(3),b.vc("matMenuTriggerFor",u)}}function bc(c,t){1&c&&(b.cc(0,"div",41),b.Oc(1,"No records found"),b.bc())}function pc(c,t){if(1&c){const c=b.dc();b.cc(0,"mat-card-content"),b.cc(1,"div",42),b.cc(2,"button",43),b.kc("click",(function(){return b.Fc(c),b.oc().onSubmit()})),b.Oc(3,"Confirm"),b.bc(),b.bc(),b.bc()}}const fc=function(){return["/admin/purchases/orders"]};let hc=(()=>{class c{constructor(c,t,e,r,o,a,i){this.appService=c,this.appSettings=t,this.formBuilder=e,this.dialog=r,this.alertService=o,this.activatedRoute=a,this.router=i,this.purchases=[],this.prerequisites={},this.products=[],this.unitmeasures=[],this.totalAmount=0,this.subTotal=0,this.purchaseOrderId=0,this.setNetAmount=()=>{this.totalAmount=0;let c=0,t=0,e=0;this.purchases.forEach(c=>{this.totalAmount=Number(this.totalAmount)+Number(c.taxableAmount),t+=Number(c.totalCgstAmount),e+=Number(c.totalSgstAmount)});const r=Number(this.form.controls.discount.value),o=Number(this.form.controls.roundOffAmount.value);r>0?(c=this.totalAmount-r,t=.09*c,e=.09*c):c=this.totalAmount,this.subTotal=c+t+e;const a=this.subTotal-o;this.form.patchValue({totalAmount:0===this.totalAmount?null:l.Utilities.toFixed(this.totalAmount),netAmount:c.toFixed(2),cgstAmount:0===t?null:l.Utilities.toFixed(t),sgstAmount:0===e?null:l.Utilities.toFixed(e),subTotal:l.Utilities.toFixed(this.subTotal),grandTotal:l.Utilities.toFixed(a),roundOffAmount:0})},this.getUnitMeasures=()=>{this.appService.getBy("product/unitmeasure/all").subscribe(c=>{this.unitmeasures=c},c=>{this.alertService.error(c)})},this.settings=this.appSettings.settings}ngOnInit(){if(this.initForm(),this.loadPreRequisites(),this.loadAllProducts(),this.getUnitMeasures(),this.sub=this.activatedRoute.params.subscribe(c=>{c.id&&(this.purchaseOrderId=c.id,this.getPurchaseOrderById())}),0==this.purchaseOrderId){const c=this.getOrderFromLS();c&&(this.form.patchValue(c.header),this.purchases=c.details)}}getPurchaseOrderById(){this.appService.getBy("purchasing/purchase-order/edit/"+this.purchaseOrderId).subscribe(c=>{this.orderToEdit=c,this.form.patchValue(c),this.purchases=c.details},c=>{this.alertService.error(c)})}initForm(){this.form=this.formBuilder.group({vendorId:0,purchaseOrderId:0,companyName:[null,n.v.compose([n.v.required,n.v.minLength(4)])],tinNo:[null],email:[null],phoneNo:[null,n.v.required],address:[null,n.v.required],invoiceNo:[null,n.v.required],purchaseDate:[null,n.v.required],totalAmount:[null,n.v.required],discount:[null],netAmount:[null,n.v.required],cgstAmount:[null],sgstAmount:[null],subTotal:[null,n.v.required],roundOffAmount:[null],grandTotal:[null,n.v.required]}),this.form.valueChanges.subscribe(c=>{this.setOrderInLS()})}updateRoundOff(){const c=Number(this.form.controls.subTotal.value),t=Number(this.form.controls.grandTotal.value);this.form.controls.roundOffAmount.setValue((c-t).toFixed(2)),this.setOrderInLS()}loadPreRequisites(){this.appService.getBy("v1/cart/filter-types/0").subscribe(c=>{this.prerequisites=c},c=>{this.alertService.error(c)})}loadAllProducts(){this.appService.getBy("product/productdetails/all").subscribe(c=>{this.products=c},c=>{this.alertService.error(c)})}openAddItemDialog(c,t,e){this.dialog.open(Y,{data:{purchase:c,products:this.products,prerequisites:this.prerequisites,unitmeasures:this.unitmeasures},panelClass:["theme-dialog"],autoFocus:!0,direction:this.settings.rtl?"rtl":"ltr"}).afterClosed().subscribe(c=>{c&&(e?this.purchases.push(c):this.purchases[t]=c,this.setNetAmount(),this.setOrderInLS())})}remove(c,t){this.dialog.open(Z.a,{maxWidth:"400px",data:{title:"Confirm Action",message:"Are you sure you want remove this purchase?"}}).afterClosed().subscribe(c=>{c&&(this.purchases.splice(t,1),this.setNetAmount(),this.setOrderInLS())})}getVendorByTinNo(){this.appService.getBy("purchasing/vendors/tin-no/"+this.form.controls.tinNo.value).subscribe(c=>{this.form.patchValue(null===c?{}:c)})}getVendorByPhone(){parseInt(this.form.controls.vendorId.value,0)>0||this.appService.getBy("purchasing/vendors/phone-number/"+this.form.controls.phoneNo.value).subscribe(c=>{this.form.patchValue(null===c?{}:c)})}onSubmit(){if(this.purchases.length>0&&this.form.valid){let c=this.form.value;c.discount=c.discount||0,c.cgstAmount=c.cgstAmount||0,c.sgstAmount=c.sgstAmount||0,c.purchaseDate&&(c.purchaseDate=Object(l.toServerDate)(c.purchaseDate)),this.appService.postBy("purchasing/purchase-order/save",{purchases:this.purchases,vendor:c}).subscribe(c=>{c.code===l.ResponseStatus.Success?(this.alertService.success(c.message),this.setOrderInLS(!0),this.router.navigate(["/admin/purchases/orders"])):this.alertService.error(c.message)},c=>{this.alertService.error(c)})}}copyPurchaseItem(c,t){c.id=0,this.openAddItemDialog(c,t,!0)}ngOnDestroy(){this.sub.unsubscribe()}setOrderInLS(c=!1){localStorage.setItem("sve_purchase_order_head",JSON.stringify({header:this.form.value,details:this.purchases})),c&&localStorage.removeItem("sve_purchase_order_head")}getOrderFromLS(){const c=localStorage.getItem("sve_purchase_order_head");return c?JSON.parse(c):null}}return c.\u0275fac=function(t){return new(t||c)(b.Wb(s.a),b.Wb(u.a),b.Wb(n.d),b.Wb(m.c),b.Wb(l.NotificationService),b.Wb(o.a),b.Wb(o.e))},c.\u0275cmp=b.Qb({type:c,selectors:[["app-purchases-add-order"]],decls:138,vars:20,consts:[[1,"p-1"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-2"],["mat-raised-button","","color","warn",3,"routerLink"],["fxLayout","row wrap"],["autocomplete","off",3,"formGroup","ngSubmit"],["fxFlex","100",1,"px-2"],["fxFlex","100","fxFlex.gt-sm","20",1,"px-1"],["appearance","outline",1,"w-100"],["matInput","","formControlName","tinNo","required","",3,"change"],[4,"ngIf"],["fxFlex","100","fxFlex.gt-sm","30",1,"px-1"],["matInput","","formControlName","companyName","required",""],["matInput","","formControlName","phoneNo","required","",3,"change"],["matInput","","formControlName","email","required",""],["fxFlex","100","fxFlex.gt-sm","100",1,"px-1"],["matInput","","formControlName","address","required","","placeholder","Address (street, apartment, suite, unit etc.)"],["fxFlex","100","fxFlex.gt-sm","33.3",1,"px-1"],["matInput","","formControlName","invoiceNo","required",""],["matInput","","readonly","","placeholder","Purchase Date","formControlName","purchaseDate",3,"matDatepicker"],["matSuffix","",3,"for"],["purchaseDate",""],["type","number","matInput","","formControlName","totalAmount","required","","readonly",""],["fxFlex","100","fxFlex.gt-sm","25",1,"px-1"],["type","number","matInput","","formControlName","discount",3,"keyup"],["type","number","readonly","","matInput","","formControlName","netAmount","required",""],["type","number","matInput","","formControlName","cgstAmount","readonly",""],["type","number","matInput","","formControlName","sgstAmount","readonly",""],["type","number","matInput","","formControlName","grandTotal",3,"keyup"],["type","number","matInput","","formControlName","roundOffAmount","readonly",""],["mat-raised-button","","color","primary",3,"click"],[1,"mat-table","admin-table"],[1,"mat-header-row"],[1,"mat-header-cell"],["class","mat-row",4,"ngFor","ngForOf"],["class","table-empty-row",4,"ngIf"],[1,"mat-row"],[1,"mat-cell"],[1,"p-1","actions"],["mat-icon-button","","matTooltip","More actions",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","","type","button",3,"click"],[1,"table-empty-row"],["fxFlex","100",1,"mt-2","text-center","w-100"],["mat-raised-button","","color","primary","type","submit",3,"click"]],template:function(c,t){if(1&c&&(b.cc(0,"div",0),b.cc(1,"mat-card"),b.cc(2,"div",1),b.cc(3,"h2"),b.Oc(4),b.bc(),b.cc(5,"a",2),b.Oc(6,"Back to orders "),b.bc(),b.bc(),b.cc(7,"mat-card-content"),b.cc(8,"div",3),b.cc(9,"form",4),b.kc("ngSubmit",(function(){return t.onSubmit()})),b.cc(10,"div",5),b.cc(11,"div",3),b.cc(12,"div",6),b.cc(13,"mat-form-field",7),b.cc(14,"mat-label"),b.Oc(15,"TIN No"),b.bc(),b.cc(16,"input",8),b.kc("change",(function(){return t.getVendorByTinNo()})),b.bc(),b.Mc(17,tc,2,0,"mat-error",9),b.bc(),b.bc(),b.cc(18,"div",10),b.cc(19,"mat-form-field",7),b.cc(20,"mat-label"),b.Oc(21,"Company Name"),b.bc(),b.Xb(22,"input",11),b.Mc(23,ec,2,0,"mat-error",9),b.Mc(24,rc,2,0,"mat-error",9),b.bc(),b.bc(),b.cc(25,"div",6),b.cc(26,"mat-form-field",7),b.cc(27,"mat-label"),b.Oc(28,"Contact No"),b.bc(),b.cc(29,"input",12),b.kc("change",(function(){return t.getVendorByPhone()})),b.bc(),b.Mc(30,oc,2,0,"mat-error",9),b.bc(),b.bc(),b.cc(31,"div",10),b.cc(32,"mat-form-field",7),b.cc(33,"mat-label"),b.Oc(34,"Email"),b.bc(),b.Xb(35,"input",13),b.Mc(36,ac,2,0,"mat-error",9),b.bc(),b.bc(),b.cc(37,"div",14),b.cc(38,"mat-form-field",7),b.cc(39,"mat-label"),b.Oc(40,"Address"),b.bc(),b.Xb(41,"input",15),b.Mc(42,ic,2,0,"mat-error",9),b.bc(),b.bc(),b.cc(43,"div",16),b.cc(44,"mat-form-field",7),b.cc(45,"mat-label"),b.Oc(46,"Invoice#"),b.bc(),b.Xb(47,"input",17),b.Mc(48,nc,2,0,"mat-error",9),b.bc(),b.bc(),b.cc(49,"div",16),b.cc(50,"mat-form-field",7),b.cc(51,"mat-label"),b.Oc(52,"Purchase date"),b.bc(),b.Xb(53,"input",18),b.Xb(54,"mat-datepicker-toggle",19),b.Xb(55,"mat-datepicker",null,20),b.Mc(57,sc,2,0,"mat-error",9),b.bc(),b.bc(),b.cc(58,"div",16),b.cc(59,"mat-form-field",7),b.cc(60,"mat-label"),b.Oc(61,"Total"),b.bc(),b.Xb(62,"input",21),b.Mc(63,lc,2,0,"mat-error",9),b.bc(),b.bc(),b.cc(64,"div",22),b.cc(65,"mat-form-field",7),b.cc(66,"mat-label"),b.Oc(67,"Discount"),b.bc(),b.cc(68,"input",23),b.kc("keyup",(function(){return t.setNetAmount()})),b.bc(),b.bc(),b.bc(),b.cc(69,"div",22),b.cc(70,"mat-form-field",7),b.cc(71,"mat-label"),b.Oc(72,"Net Amount"),b.bc(),b.Xb(73,"input",24),b.Mc(74,uc,2,0,"mat-error",9),b.bc(),b.bc(),b.cc(75,"div",22),b.cc(76,"mat-form-field",7),b.cc(77,"mat-label"),b.Oc(78,"CGST(9%)"),b.bc(),b.Xb(79,"input",25),b.bc(),b.bc(),b.cc(80,"div",22),b.cc(81,"mat-form-field",7),b.cc(82,"mat-label"),b.Oc(83,"SGST(9%)"),b.bc(),b.Xb(84,"input",26),b.bc(),b.bc(),b.cc(85,"div",22),b.cc(86,"mat-form-field",7),b.cc(87,"mat-label"),b.Oc(88,"Grand Total"),b.bc(),b.cc(89,"input",27),b.kc("keyup",(function(){return t.updateRoundOff()})),b.bc(),b.Mc(90,dc,2,0,"mat-error",9),b.bc(),b.bc(),b.cc(91,"div",22),b.cc(92,"mat-form-field",7),b.cc(93,"mat-label"),b.Oc(94,"Round Off"),b.bc(),b.Xb(95,"input",28),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(96,"div",1),b.cc(97,"h2"),b.Oc(98,"Purchased Product List"),b.bc(),b.cc(99,"button",29),b.kc("click",(function(){return t.openAddItemDialog(null,-1,!0)})),b.Oc(100,"Add Purchase Item"),b.bc(),b.bc(),b.Xb(101,"mat-divider"),b.cc(102,"mat-card-content"),b.cc(103,"div",30),b.cc(104,"div",31),b.cc(105,"div",32),b.Oc(106,"Product"),b.bc(),b.cc(107,"div",32),b.Oc(108,"Category"),b.bc(),b.cc(109,"div",32),b.Oc(110,"Material"),b.bc(),b.cc(111,"div",32),b.Oc(112,"Size"),b.bc(),b.cc(113,"div",32),b.Oc(114,"Brand"),b.bc(),b.cc(115,"div",32),b.Oc(116,"Grade"),b.bc(),b.cc(117,"div",32),b.Oc(118,"Color"),b.bc(),b.cc(119,"div",32),b.Oc(120,"UM"),b.bc(),b.cc(121,"div",32),b.Oc(122,"Quantity"),b.bc(),b.cc(123,"div",32),b.Oc(124,"MRP"),b.bc(),b.cc(125,"div",32),b.Oc(126,"UnitPrice"),b.bc(),b.cc(127,"div",32),b.Oc(128,"CGST"),b.bc(),b.cc(129,"div",32),b.Oc(130,"SGST"),b.bc(),b.cc(131,"div",32),b.Oc(132,"Taxable Amount"),b.bc(),b.cc(133,"div",32),b.Oc(134,"Actions"),b.bc(),b.bc(),b.Mc(135,mc,59,46,"div",33),b.bc(),b.Mc(136,bc,2,0,"div",34),b.bc(),b.Mc(137,pc,4,0,"mat-card-content",9),b.bc(),b.bc()),2&c){const c=b.Cc(56);b.Jb(4),b.Qc("",t.productId?"Edit":"Add New"," Purchases"),b.Jb(1),b.vc("routerLink",b.xc(19,fc)),b.Jb(4),b.vc("formGroup",t.form),b.Jb(8),b.vc("ngIf",null==t.form.controls.tinNo.errors?null:t.form.controls.tinNo.errors.required),b.Jb(6),b.vc("ngIf",null==t.form.controls.companyName.errors?null:t.form.controls.companyName.errors.required),b.Jb(1),b.vc("ngIf",t.form.controls.companyName.hasError("minlength")),b.Jb(6),b.vc("ngIf",null==t.form.controls.phoneNo.errors?null:t.form.controls.phoneNo.errors.required),b.Jb(6),b.vc("ngIf",null==t.form.controls.email.errors?null:t.form.controls.email.errors.required),b.Jb(6),b.vc("ngIf",null==t.form.controls.address.errors?null:t.form.controls.address.errors.required),b.Jb(6),b.vc("ngIf",null==t.form.controls.invoiceNo.errors?null:t.form.controls.invoiceNo.errors.required),b.Jb(5),b.vc("matDatepicker",c),b.Jb(1),b.vc("for",c),b.Jb(3),b.vc("ngIf",null==t.form.controls.purchaseDate.errors?null:t.form.controls.purchaseDate.errors.required),b.Jb(6),b.vc("ngIf",null==t.form.controls.totalAmount.errors?null:t.form.controls.totalAmount.errors.required),b.Jb(11),b.vc("ngIf",null==t.form.controls.netAmount.errors?null:t.form.controls.netAmount.errors.required),b.Jb(16),b.vc("ngIf",null==t.form.controls.grandTotal.errors?null:t.form.controls.grandTotal.errors.required),b.Jb(45),b.vc("ngForOf",t.purchases),b.Jb(1),b.vc("ngIf",t.purchases&&0===t.purchases.length),b.Jb(1),b.vc("ngIf",t.purchases.length>0&&t.form.valid)}},directives:[p.a,f.d,f.c,h.a,o.g,p.b,n.w,n.p,n.i,f.a,I.c,I.g,y.b,n.c,n.o,n.g,n.u,r.m,cc.b,cc.d,I.h,cc.a,n.s,h.b,v.a,r.l,I.b,q.a,S.e,P.a,S.f,S.c],pipes:[B.a],styles:[""]}),c})();const vc=[{path:"",redirectTo:"orders",pathMatch:"full"},{path:"orders",component:w,data:{breadcrumb:"Purchase Orders"}},{path:"add-purchase",component:hc,data:{breadcrumb:"Add Purchase order"}},{path:"edit/:id",component:hc,data:{breadcrumb:"Edit purchase order"}}];let gc=(()=>{class c{}return c.\u0275mod=b.Ub({type:c}),c.\u0275inj=b.Tb({factory:function(t){return new(t||c)},imports:[[r.c,l.JxNetCoreModule,n.j,o.h.forChild(vc),a.a,n.t,i.a]]}),c})()}}]);